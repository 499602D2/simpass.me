var cryptoRandomString=require("crypto-random-string"),entropy=require("string-entropy"),animationQueue=[],chimpuSpins=1;document.addEventListener("DOMContentLoaded",()=>{$("#chimpu").mouseenter(function(){spinchimpu()}),$("#lengthSelect").on("input",verifyInput),window.refreshIntervalId=window.setInterval(passGen,[250]),document.getElementById("copyButton").addEventListener("click",()=>{onCopy()}),document.getElementById("generatorOutput").addEventListener("click",()=>{onCopy()}),768>$(window).width()&&($("#lengthSelect").focus(function(){hideFooter()}),$("#lengthSelect").focusout(function(){showFooter()}),$("select").focus(function(){hideFooter()}),$("select").focusout(function(){showFooter()})),spinchimpu()});function hideFooter(){document.getElementById("footer").style.opacity="0",document.getElementById("footer").style.transition="opacity 200ms ease-out"}function showFooter(){document.getElementById("footer").style.opacity="1",document.getElementById("footer").style.transition="opacity 650ms ease-in"}function onCopy(){$("#generatorOutput").focus(),$("#generatorOutput").select(),document.execCommand("copy"),calcEntropy(),copyNotify(),spinchimpu()}function verifyInput(){0>$("#lengthSelect").val()&&$("#lengthSelect").val(Math.abs($("#lengthSelect").val())),2048<=$("#lengthSelect").val()?(clearInterval(window.refreshIntervalId),window.refreshIntervalId=window.setInterval(passGen,[550])):512<=$("#lengthSelect").val()?(clearInterval(window.refreshIntervalId),window.refreshIntervalId=window.setInterval(passGen,[350])):512>$("#lengthSelect").val()&&(clearInterval(window.refreshIntervalId),window.refreshIntervalId=window.setInterval(passGen,[250]))}function calcEntropy(){$("#entropyVal").text(entropy($("#generatorOutput").val()))}function sleep(a){return new Promise(b=>setTimeout(b,a))}async function copyNotify(){animationQueue.unshift("fadeIn");for(var a=document.getElementsByClassName("copyNotifyText"),b=0;b<a.length;b++)a[b].style.opacity="1",a[b].style.transition="opacity 300ms ease-out",a[b].style.visibility="visible";await sleep(300),animationQueue.pop(),await sleep(2200),0==animationQueue.length&&(a[0].style.opacity="0",a[1].style.opacity="0",a[0].style.visibility="hidden",a[1].style.visibility="hidden",a[0].style.transition="visibility 750ms, opacity 750ms",a[1].style.transition="visibility 750ms, opacity 750ms")}function spinchimpu(){var a=document.getElementById("chimpu");a.style.transition="0.6s",a.style.transform=`rotate(${360*chimpuSpins}deg)`,chimpuSpins+=1}function readableSequence(a,b,c,d){for(var e=+a||12,b=b||"base64",c=c||"-",f=0,g="",h=0;h<e;h){if(3<e-h){if(d)var g=g.concat(cryptoRandomString({length:4,characters:d}));else var g=g.concat(cryptoRandomString({length:4,type:b}));h+=4,f+=4}else{if(d)var g=g.concat(cryptoRandomString({length:1,characters:d}));else var g=g.concat(cryptoRandomString({length:1,type:b}));h+=1,f+=1}if(4==f){if(h+1<=e)var g=g.concat(c);h+=1,f=0}}return g}async function passGen(){if(document.hasFocus()){var a=document.getElementById("lengthSelect").value,b=document.getElementById("complexitySelect").value,c=document.getElementById("readableSelect").value,d=+a||12,b=b||"base64",c=c||"true";!1==["readable","base64","symbols","hex","url-safe","numeric","distinguishable"].includes(b)&&(b="base64");var e="";if("true"==c){if("symbols"==b)var f="!\"#$%&'()*+,-.0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}~",e=readableSequence(d,null,"/",f);else var e=readableSequence(d,b,"-");}else if("symbols"==b)var f="!\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",e=cryptoRandomString({length:d,characters:f});else var e=cryptoRandomString({length:d,type:b});$("#generatorOutput").val(e)}else $("#generatorOutput").val("waiting..."),$("#entropyVal").text(entropy("waiting..."))}